(()=>{let e=Math.random,i=a,r=i.getContext("2d"),h=i.cloneNode(),n=h.getContext("2d"),l=[],o=[];function d(){i.width=h.width=innerWidth,i.height=h.height=innerHeight,i.style.filter="saturate(2)",l=[];for(let t=0;t<200;t++)l.push({x:e()*i.width,y:e()*i.height,vx:0,vy:0,r:.001*i.height+15*e(),setpoint:e()*Math.PI*2,error:.5,gain:10.9+.8*e(),delayBuffer:[],emissionPower:1+5*e(),hue:240+20*e()})}window.addEventListener("resize",d),d(),function a(){n.fillStyle=`rgba(22, 178, 174, ${.03*e()-.005+.005})`,n.fillRect(0,0,h.width,h.height);for(let t=o.length-1;t>=0;t--){let e=o[t];if(e.x+=e.vx,e.y+=e.vy,e.a-=.1,e.a<=0)o.splice(t,1);else{n.fillStyle=e.err>0?`rgba(125,115,0,${e.a})`:`rgba(238,43,226,${e.a})`;let t=Math.max(0,e.err/Math.PI),i=e.err>0?e.r*(1+2*t):e.r;n.beginPath(),n.arc(e.x,e.y,i,0,2*Math.PI),n.fill()}}l.forEach((t,a)=>{let r=a>0?l[a-1]:null,h=0;r?(h=r.setpoint-t.setpoint,h=(h+Math.PI)%(2*Math.PI)-Math.PI,t.delayBuffer.push(h),t.delayBuffer.length>30&&(h=t.delayBuffer.shift()),t.setpoint+=t.gain*h):t.setpoint+=5*(e()-.5)*Math.PI;let o=12+1*e()*t.emissionPower*10.5;t.vx=(e()<.9?Math.sin(t.setpoint):Math.cos(t.setpoint))*o,t.vy=Math.sin(t.setpoint)*o,t.x+=.43*t.vx*e(),t.y+=.3*t.vy*e(),t.x<0&&(t.x=i.width),t.x>i.width&&(t.x=0),t.y<0&&(t.y=i.height),t.y>i.height&&(t.y=0);let d=.08+.4*(1-a/199),s=n.createRadialGradient(t.x,t.y,5*t.r*e(),t.x,t.y,t.r);s.addColorStop(0,`rgba(235,215,30,${d})`),s.addColorStop(1,`rgba(238,153,226,${d})`),n.fillStyle=s,n.beginPath(),n.arc(t.x,t.y,t.r,0,2*Math.PI),n.fill()}),r.drawImage(h,0,0),requestAnimationFrame(a),t.textContent=(Date.now()/1e3).toFixed(3)}()})()