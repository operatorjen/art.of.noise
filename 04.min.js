(()=>{let e=Math.random,i=a,r=i.getContext("2d"),h=i.cloneNode(),n=h.getContext("2d"),l=[],o=[];function d(){i.width=h.width=innerWidth,i.height=h.height=innerHeight,i.style.filter="saturate(2.4)",l=[];for(let t=0;t<250;t++)l.push({x:e()*i.width,y:e()*i.height,vx:0,vy:0,r:.003*i.height+8*e(),setpoint:e()*Math.PI*2,error:.2,gain:1.9+.8*e(),delayBuffer:[],emissionPower:1+5*e()})}window.addEventListener("resize",d),d(),function a(){n.fillStyle=`rgba(122, 28, 194, ${.06*e()-.001+.001})`,n.fillRect(0,0,h.width,h.height);for(let t=o.length-1;t>=0;t--){let e=o[t];if(e.x+=e.vx,e.y+=e.vy,e.a-=.02,e.a<=0)o.splice(t,1);else{n.fillStyle=e.err>0?`rgba(225,115,0,${e.a})`:`rgba(238,43,226,${e.a})`;let t=Math.max(0,e.err/Math.PI),i=e.err>0?e.r*(1+2*t):e.r;n.beginPath(),n.arc(e.x,e.y,i,0,2*Math.PI),n.fill()}}l.forEach((t,a)=>{let r=a>0?l[a-1]:null,h=0;r?(h=r.setpoint-t.setpoint,h=(h+Math.PI)%(2*Math.PI)-Math.PI,t.delayBuffer.push(h),t.delayBuffer.length>130&&(h=t.delayBuffer.shift()),t.setpoint+=t.gain*h):t.setpoint+=25*(e()-.5)*Math.PI;let o=1+1*e()*t.emissionPower*1.2;t.vx=Math.cos(t.setpoint)*o,t.vy=Math.sin(t.setpoint)*o,t.x+=1.61*t.vx*e(),t.y+=21.8*t.vy*e(),t.x<0&&(t.x=i.width),t.x>i.width&&(t.x=0),t.y<0&&(t.y=i.height),t.y>i.height&&(t.y=0);let d=.008+.4*(1-a/249),f=n.createRadialGradient(t.x,t.y,2*t.r*e(),t.x,t.y,t.r);f.addColorStop(0,`rgba(35,235,230,${d})`),f.addColorStop(1,`rgba(238,183,26,${d})`),n.fillStyle=f,n.beginPath(),n.arc(t.x,t.y,t.r,0,2*Math.PI),n.fill()}),r.drawImage(h,0,0),requestAnimationFrame(a),t.textContent=(Date.now()/1e3).toFixed(3)}()})()